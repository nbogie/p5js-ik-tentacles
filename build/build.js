"use strict";
var Palette = (function () {
    function Palette() {
    }
    Palette.getColors = function () {
        return [
            color(250, 105, 0),
            color(105, 210, 231),
            color(167, 219, 216),
            color(243, 134, 48)
        ];
    };
    Palette.randomColor = function () {
        return random(Palette.getColors());
    };
    return Palette;
}());
var Particle = (function () {
    function Particle(pos) {
        this.pos = pos.copy();
    }
    Particle.prototype.draw = function () {
        noStroke();
        fill("black");
        rectMode(CENTER);
        square(this.pos.x, this.pos.y, 3);
        fill(0, 20);
    };
    Particle.prototype.setPosition = function (pos) {
        this.pos.x = pos.x;
        this.pos.y = pos.y;
    };
    Particle.createRandom = function () {
        return new Particle(randomScreenPosition());
    };
    return Particle;
}());
function randomColor() {
    colorMode(HSB, 100);
    return color(random(100), 100, 100);
}
var Segment = (function () {
    function Segment(id, a, b, target, thicknessScale, maxThickness, myHue) {
        this.id = id;
        this.a = a.copy();
        this.b = b.copy();
        this.isFixed = false;
        this.len = a.dist(b);
        colorMode(HSB, 100);
        this.target = target;
        this.myHue = myHue;
        var sat = 50;
        var bright = 50;
        this.myColor = color(this.myHue, sat, random(bright - 10, bright + 10));
        this.edgeColor = color(this.myHue, sat, bright - 20);
        this.thickness = thicknessScale * maxThickness * random(0.9, 1.1);
        this.targetColor = randomColor();
    }
    Segment.prototype.pos = function () {
        return this.a.copy();
    };
    Segment.prototype.getAngle = function () {
        return this.b
            .copy()
            .sub(this.a)
            .heading();
    };
    Segment.prototype.translate = function (offset) {
        this.a.add(offset);
        this.b.add(offset);
    };
    Segment.prototype.drawShadow = function () {
        var off = createVector(20, 10);
        stroke(color(this.myHue, 0, 0, 20));
        noFill();
        strokeWeight(this.thickness);
        line(off.x + this.a.x, off.y + this.a.y, off.x + this.b.x, off.y + this.b.y);
    };
    Segment.prototype.drawSilhoutte = function () {
        noFill();
        stroke(10);
        strokeWeight(this.thickness);
        line(this.a.x, this.a.y, this.b.x, this.b.y);
    };
    Segment.prototype.drawInner = function () {
        stroke(this.myColor);
        strokeWeight(this.thickness * 0.8);
        line(this.a.x, this.a.y, this.b.x, this.b.y);
    };
    Segment.drawCrosshairAt = function (pos, colr) {
        strokeWeight(1.8);
        stroke(colr);
        push();
        translate(pos.x, pos.y);
        line(-8, 0, 8, 0);
        line(0, -8, 0, 8);
        pop();
    };
    Segment.prototype.midPoint = function () {
        return this.a.copy().lerp(this.b, 0.5);
    };
    Segment.createRandomAt = function (id, posA, target, thicknessScale, maxThickness, len, myHue) {
        var p1 = posA.copy();
        var p2 = p1.copy().add(p5.Vector.random2D().mult(len));
        return new Segment(id, p1, p2, target, thicknessScale, maxThickness, myHue);
    };
    Segment.prototype.update = function () {
        this.seekTarget(this.target.pos());
    };
    Segment.prototype.seekTarget = function (targetPos) {
        var deltaToTarget = targetPos.copy().sub(this.a);
        this.deltaToTarget = deltaToTarget;
        this.a = targetPos.copy().add(deltaToTarget
            .copy()
            .normalize()
            .mult(-this.len));
        this.b = targetPos.copy();
    };
    return Segment;
}());
var Tentacle = (function () {
    function Tentacle(numSegments, fullLength, maxThickness, baseHueOf100, provideTarget) {
        var _this = this;
        var myHue = random(baseHueOf100 - 5, baseHueOf100 + 5);
        var avgSegmentLength = fullLength / numSegments;
        this.provideTarget = provideTarget;
        var prevPos = createVector(random(width * 0.4, width * 0.6), height * 1.1);
        this.segments = collectDistributedBetween(numSegments, 0, 0.9, function (thickness, ix) {
            var segment = Segment.createRandomAt("Seg" + ix, prevPos, null, 1 - thickness, maxThickness, avgSegmentLength, myHue);
            prevPos = segment.b.copy();
            return segment;
        });
        this.segments[0].isFixed = true;
        var thinnerSegment = null;
        this.segments.reverse().forEach(function (seg) {
            seg.target = thinnerSegment ? thinnerSegment : _this.provideTarget;
            thinnerSegment = seg;
        });
        this.segments.reverse();
    }
    Tentacle.prototype.lastSegment = function () {
        return this.segments.length > 0
            ? this.segments[this.segments.length - 1]
            : undefined;
    };
    Tentacle.prototype.firstSegment = function () {
        return this.segments.length > 0 ? this.segments[0] : undefined;
    };
    Tentacle.prototype.setNewTargetProvider = function (givenTargetProvider) {
        this.provideTarget = givenTargetProvider;
        this.lastSegment().target = givenTargetProvider;
    };
    Tentacle.prototype.update = function () {
        var originalLockedPos = this.segments[0].a.copy();
        this.segments.reverse();
        for (var _i = 0, _a = this.segments; _i < _a.length; _i++) {
            var s = _a[_i];
            s.update();
        }
        this.segments.reverse();
        var moveBackDelta = originalLockedPos
            .copy()
            .sub(this.segments[0].a.copy());
        this.segments.forEach(function (s) { return s.translate(moveBackDelta); });
    };
    Tentacle.prototype.draw = function () {
        if (appOptions.shouldDrawShadows) {
            for (var _i = 0, _a = this.segments; _i < _a.length; _i++) {
                var s = _a[_i];
                s.drawShadow();
            }
        }
        for (var _b = 0, _c = this.segments; _b < _c.length; _b++) {
            var s = _c[_b];
            s.drawSilhoutte();
        }
        for (var _d = 0, _e = this.segments; _d < _e.length; _d++) {
            var s = _e[_d];
            s.drawInner();
        }
    };
    return Tentacle;
}());
function randomScreenPosition() {
    return createVector(random(width), random(height));
}
function centerScreenPos() {
    return createVector(width / 2, height / 2);
}
function randomInt(min, max) {
    return round(random(min, max));
}
function translateToVec(pos) {
    translate(pos.x, pos.y);
}
function rotateVertexAround(vertex, rotOrigin, angleRad) {
    return vertex
        .copy()
        .sub(rotOrigin)
        .rotate(angleRad)
        .add(rotOrigin);
}
function minBy(list, fn) {
    if (list.length < 0) {
        return undefined;
    }
    var recordItem = list[0];
    var recordWeight = fn(list[0]);
    for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {
        var item = list_1[_i];
        var weight = fn(item);
        if (weight > recordWeight) {
            recordWeight = weight;
            recordItem = item;
        }
    }
    return recordItem;
}
function repeat(num, fn) {
    for (var i = 0; i < num; i++) {
        fn(i);
    }
}
function distributeUpTo(total, max, fn) {
    repeat(total, function (ix) {
        var val = (ix * max) / total;
        return fn(val);
    });
}
function collectDistributedBetween(numSamples, min, max, fn) {
    var result = [];
    distributeBetween(numSamples, min, max, function (v, ix) { return result.push(fn(v, ix)); });
    return result;
}
function distributeBetween(numSamples, min, max, fn) {
    repeat(numSamples, function (ix) {
        var range = max - min;
        var val = min + (ix * range) / numSamples;
        return fn(val, ix);
    });
}
function averageVectors(vs) {
    if (vs.length < 1) {
        return createVector(0, 0);
    }
    return vs.reduce(function (v1, v2) { return v1.copy().add(v2); }, vs[0]).div(vs.length);
}
function randomBoolean() {
    return Math.random() > 0.5;
}
function mousePosAsVector() {
    return createVector(mouseX, mouseY);
}
function collect(n, fn) {
    var res = [];
    for (var i = 0; i < n; i++) {
        res.push(fn(i));
    }
    return res;
}
p5.disableFriendlyErrors = true;
var defaultAppOptions = {
    shouldDrawShadows: true
};
var appOptions = defaultAppOptions;
var gNumTentacles = 5;
var gTentacles = [];
var lovecraftQuotes = [
    "It was not meant that we should voyage far",
    "A mountain walked or stumbled",
    "In his house at R'lyeh, dead Cthulu waits dreaming"
];
function randomAppOptions() {
    return {
        shouldDrawShadows: randomBoolean()
    };
}
function mouseHasMoved() {
    return dist(pmouseX, pmouseY, mouseX, mouseY) > 0;
}
function noisyMousePos(phase) {
    var amp = map(sin(frameCount / 20), -1, 1, 10, 40);
    var offsetX = map(noise(3 * phase + frameCount / 20), 0, 1, -amp, amp);
    var offsetY = map(noise(4 * phase + frameCount / 20), 0, 1, -amp, amp);
    return mousePosAsVector().add(createVector(offsetX, offsetY));
}
function makeTargetProvider(phase) {
    var perliner = makePerlinNoisePosFn(phase);
    return { pos: function () { return (mouseHasMoved() ? noisyMousePos(phase) : perliner()); } };
}
function makePerlinNoisePosFn(phase) {
    return function () {
        return createVector(map(noise(phase + frameCount / 100), 0, 1, width / 2 - height * 0.3, width / 2 + height * 0.3), height * noise(88888 + phase + frameCount / 100));
    };
}
function rebuildTentacles() {
    var baseHue = random(100);
    gTentacles = collect(gNumTentacles, function (ix) {
        var targetProvider = makeTargetProvider(ix * 1000);
        return new Tentacle(200, height, random(80, 100), baseHue, targetProvider);
    });
}
function toggleShouldCastShadows() {
    appOptions.shouldDrawShadows = !appOptions.shouldDrawShadows;
}
function mousePressed() {
    rebuildTentacles();
}
function keyPressed() {
    if (key == "s") {
        toggleShouldCastShadows();
    }
    if (key == " ") {
        catchAllTargetWords();
    }
}
function catchAllTargetWords() {
    var elemsToCatch = findTargetWords();
    elemsToCatch.forEach(function (elem, ix) {
        catchTargetElem(elem, gTentacles[ix]);
    });
}
function setup() {
    var myCanvas = createCanvas(windowWidth, windowHeight);
    myCanvas.parent(document.body);
    myCanvas.style("z-index", "-1");
    myCanvas.position(0, 0);
    rebuildTentacles();
}
function update() {
    var targetWords = findTargetWords();
    if (keyIsDown(67)) {
        gTentacles[0].setNewTargetProvider({
            pos: function () { return getPosOfTargetWord(targetWords[0]).pos; }
        });
    }
    gTentacles.forEach(function (t) {
        t.update();
        if (t.heldWord) {
            moveHeldWordTo(t.heldWord, t.lastSegment().b);
            rotateHeldWord(t.heldWord.elem, t.lastSegment().getAngle());
        }
    });
}
function rotateHeldWord(elem, heading) {
    elem.style.transform = "rotate(" + degrees(heading + 90) + "deg)";
}
function draw() {
    update();
    background(0);
    fill("black");
    noStroke();
    gTentacles.forEach(function (t) { return t.draw(); });
}
function getPosOfTargetWord(el) {
    var b = el.getBoundingClientRect();
    return {
        left: b.left,
        right: b.right,
        top: b.top,
        bottom: b.bottom,
        width: b.width,
        height: b.height,
        pos: createVector(b.left + b.width / 2, b.top + b.height / 2)
    };
}
function moveHeldWordTo(heldWord, newPos) {
    var elem = heldWord.elem;
    var boundsInfo = heldWord.originalPosAndBounds;
    boundsInfo.width;
    elem.style.left = newPos.x - boundsInfo.width / 2 + "px";
    elem.style.top = newPos.y - boundsInfo.height / 2 + "px";
}
function findTargetWords() {
    return Array.from(document.getElementsByClassName("wordtoeat"));
}
function catchTargetElem(elem, tentacle) {
    var targetElem = elem;
    var clone = targetElem.cloneNode(true);
    targetElem.style.visibility = "hidden";
    document.body.append(clone);
    clone.classList.add("caught");
    tentacle.heldWord = {
        elem: clone,
        originalPosAndBounds: getPosOfTargetWord(clone)
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VSb290IjoiLi9qcy8iLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiUGFsZXR0ZS50cyIsIlBhcnRpY2xlLnRzIiwiU2VnbWVudC50cyIsIlRlbnRhY2xlLnRzIiwiVXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FDQWI7SUFBQTtJQVlBLENBQUM7SUFYUSxpQkFBUyxHQUFoQjtRQUNFLE9BQU87WUFDTCxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDbEIsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO1lBQ3BCLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztZQUNwQixLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7U0FDcEIsQ0FBQztJQUNKLENBQUM7SUFDTSxtQkFBVyxHQUFsQjtRQUNFLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFDSCxjQUFDO0FBQUQsQ0FBQyxBQVpELElBWUM7QUNaRDtJQUdFLGtCQUFZLEdBQWM7UUFDeEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUNELHVCQUFJLEdBQUo7UUFDRSxRQUFRLEVBQUUsQ0FBQztRQUNYLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNkLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNkLENBQUM7SUFFRCw4QkFBVyxHQUFYLFVBQVksR0FBYztRQUN4QixJQUFJLENBQUMs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QUFFLGtCQUFrQixDQUFDLEtBQUssQ0FBQztLQUNoRCxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xucDUuZGlzYWJsZUZyaWVuZGx5RXJyb3JzID0gdHJ1ZTtcblxuaW50ZXJmYWNlIEFwcE9wdGlvbnMge1xuICBzaG91bGREcmF3U2hhZG93czogYm9vbGVhbjtcbn1cblxubGV0IGRlZmF1bHRBcHBPcHRpb25zOiBBcHBPcHRpb25zID0ge1xuICBzaG91bGREcmF3U2hhZG93czogdHJ1ZVxufTtcblxubGV0IGFwcE9wdGlvbnM6IEFwcE9wdGlvbnMgPSBkZWZhdWx0QXBwT3B0aW9ucztcblxuY29uc3QgZ051bVRlbnRhY2xlcyA9IDU7XG5sZXQgZ1RlbnRhY2xlczogVGVudGFjbGVbXSA9IFtdO1xuXG5jb25zdCBsb3ZlY3JhZnRRdW90ZXMgPSBbXG4gIFwiSXQgd2FzIG5vdCBtZWFudCB0aGF0IHdlIHNob3VsZCB2b3lhZ2UgZmFyXCIsXG4gIFwiQSBtb3VudGFpbiB3YWxrZWQgb3Igc3R1bWJsZWRcIixcbiAgXCJJbiBoaXMgaG91c2UgYXQgUidseWVoLCBkZWFkIEN0aHVsdSB3YWl0cyBkcmVhbWluZ1wiXG5dO1xuXG5mdW5jdGlvbiByYW5kb21BcHBPcHRpb25zKCk6IEFwcE9wdGlvbnMge1xuICByZXR1cm4ge1xuICAgIHNob3VsZERyYXdTaGFkb3dzOiByYW5kb21Cb29sZWFuKClcbiAgfTtcbn1cblxuZnVuY3Rpb24gbW91c2VIYXNNb3ZlZCgpIHtcbiAgcmV0dXJuIGRpc3QocG1vdXNlWCwgcG1vdXNlWSwgbW91c2VYLCBtb3VzZVkpID4gMDtcbn1cblxuZnVuY3Rpb24gbm9pc3lNb3VzZVBvcyhwaGFzZTogbnVtYmVyKSB7XG4gIC8vdW5kdWxhdGluZyBhdHRlbnRpb25cbiAgY29uc3QgYW1wID0gbWFwKHNpbihmcmFtZUNvdW50IC8gMjApLCAtMSwgMSwgMTAsIDQwKTtcblxuICBjb25zdCBvZmZzZXRYID0gbWFwKG5vaXNlKDMgKiBwaGFzZSArIGZyYW1lQ291bnQgLyAyMCksIDAsIDEsIC1hbXAsIGFtcCk7XG4gIGNvbnN0IG9mZnNldFkgPSBtYXAobm9pc2UoNCAqIHBoYXNlICsgZnJhbWVDb3VudCAvIDIwKSwgMCwgMSwgLWFtcCwgYW1wKTtcbiAgcmV0dXJuIG1vdXNlUG9zQXNWZWN0b3IoKS5hZGQoY3JlYXRlVmVjdG9yKG9mZnNldFgsIG9mZnNldFkpKTtcbn1cblxuZnVuY3Rpb24gbWFrZVRhcmdldFByb3ZpZGVyKHBoYXNlOiBudW1iZXIpOiBUYXJnZXRQcm92aWRlciB7XG4gIC8vL1RPRE86IG5ldmVyIHB1dCBhIHRhcmdldCBjb21wbGV0ZWx5IG91dCBvZiByZWFjaCBhcyBzeXN0ZW0gc3RyZXRjaGVzXG4gIC8vIG91dCB1bm5hdHVyYWxseSwgaW5vcmdhbmljYWxseSBzdHJhaWdodC5cbiAgLy8vSW5zdGVhZCBpZiB0YXJnZXQgd291bGQgYmUgb3V0IG9mIHJlYWNoIGJyaW5nIGl0IGp1c3Qgd2l0aGluIHJlYWNoLCBvbiBzYW1lIGxpbmUuXG4gIGNvbnN0IHBlcmxpbmVyID0gbWFrZVBlcmxpbk5vaXNlUG9zRm4ocGhhc2UpO1xuICByZXR1cm4geyBwb3M6ICgpID0+IChtb3VzZUhhc01vdmVkKCkgPyBub2lzeU1vdXNlUG9zKHBoYXNlKSA6IHBlcmxpbmVyKCkpIH07XG59XG5mdW5jdGlvbiBtYWtlUGVybGluTm9pc2VQb3NGbihwaGFzZTogbnVtYmVyKSB7XG4gIHJldHVybiAoKSA9PlxuICAgIGNyZWF0ZVZlY3RvcihcbiAgICAgIG1hcChcbiAgICAgICAgbm9pc2UocGhhc2UgKyBmcmFtZUNvdW50IC8gMTAwKSxcbiAgICAgICAgMCxcbiAgICAgICAgMSxcbiAgICAgICAgd2lkdGggLyAyIC0gaGVpZ2h0ICogMC4zLFxuICAgICAgICB3aWR0aCAvIDIgKyBoZWlnaHQgKiAwLjNcbiAgICAgICksXG4gICAgICBoZWlnaHQgKiBub2lzZSg4ODg4OCArIHBoYXNlICsgZnJhbWVDb3VudCAvIDEwMClcbiAgICApO1xufVxuZnVuY3Rpb24gcmVidWlsZFRlbnRhY2xlcygpIHtcbiAgY29uc3QgYmFzZUh1ZSA9IHJhbmRvbSgxMDApO1xuICBnVGVudGFjbGVzID0gY29sbGVjdChnTnVtVGVudGFjbGVzLCBpeCA9PiB7XG4gICAgY29uc3QgdGFyZ2V0UHJvdmlkZXIgPSBtYWtlVGFyZ2V0UHJvdmlkZXIoaXggKiAxMDAwKTtcbiAgICByZXR1cm4gbmV3IFRlbnRhY2xlKDIwMCwgaGVpZ2h0LCByYW5kb20oODAsIDEwMCksIGJhc2VIdWUsIHRhcmdldFByb3ZpZGVyKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVNob3VsZENhc3RTaGFkb3dzKCkge1xuICBhcHBPcHRpb25zLnNob3VsZERyYXdTaGFkb3dzID0gIWFwcE9wdGlvbnMuc2hvdWxkRHJhd1NoYWRvd3M7XG59XG5cbmZ1bmN0aW9uIG1vdXNlUHJlc3NlZCgpIHtcbiAgcmVidWlsZFRlbnRhY2xlcygpO1xufVxuZnVuY3Rpb24ga2V5UHJlc3NlZCgpIHtcbiAgaWYgKGtleSA9PSBcInNcIikge1xuICAgIHRvZ2dsZVNob3VsZENhc3RTaGFkb3dzKCk7XG4gIH1cbiAgaWYgKGtleSA9PSBcIiBcIikge1xuICAgIGNhdGNoQWxsVGFyZ2V0V29yZHMoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjYXRjaEFsbFRhcmdldFdvcmRzKCk6IHZvaWQge1xuICBjb25zdCBlbGVtc1RvQ2F0Y2g6IEhUTUxFbGVtZW50W10gPSBmaW5kVGFyZ2V0V29yZHMoKTtcbiAgZWxlbXNUb0NhdGNoLmZvckVhY2goKGVsZW0sIGl4KSA9PiB7XG4gICAgY2F0Y2hUYXJnZXRFbGVtKGVsZW0sIGdUZW50YWNsZXNbaXhdKTtcbiAgfSk7XG59XG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU0VUVVBcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBzZXR1cCgpIHtcbiAgY29uc3QgbXlDYW52YXMgPSBjcmVhdGVDYW52YXMod2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCk7XG4gIG15Q2FudmFzLnBhcmVudChkb2N1bWVudC5ib2R5KTtcbiAgbXlDYW52YXMuc3R5bGUoXCJ6LWluZGV4XCIsIFwiLTFcIik7XG4gIG15Q2FudmFzLnBvc2l0aW9uKDAsIDApO1xuXG4gIHJlYnVpbGRUZW50YWNsZXMoKTtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFVQREFURVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgY29uc3QgdGFyZ2V0V29yZHM6IEhUTUxFbGVtZW50W10gPSBmaW5kVGFyZ2V0V29yZHMoKTtcbiAgaWYgKGtleUlzRG93big2NykpIHtcbiAgICAvL1wiY1wiXG4gICAgZ1RlbnRhY2xlc1swXS5zZXROZXdUYXJnZXRQcm92aWRlcih7XG4gICAgICBwb3M6ICgpID0+IGdldFBvc09mVGFyZ2V0V29yZCh0YXJnZXRXb3Jkc1swXSkucG9zXG4gICAgfSk7XG4gIH1cbiAgZ1RlbnRhY2xlcy5mb3JFYWNoKHQgPT4ge1xuICAgIHQudXBkYXRlKCk7XG4gICAgaWYgKHQuaGVsZFdvcmQpIHtcbiAgICAgIG1vdmVIZWxkV29yZFRvKHQuaGVsZFdvcmQsIHQubGFzdFNlZ21lbnQoKS5iKTtcbiAgICAgIHJvdGF0ZUhlbGRXb3JkKHQuaGVsZFdvcmQuZWxlbSwgdC5sYXN0U2VnbWVudCgpLmdldEFuZ2xlKCkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJvdGF0ZUhlbGRXb3JkKGVsZW06IEhUTUxFbGVtZW50LCBoZWFkaW5nOiBudW1iZXIpIHtcbiAgZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZShcIiArIGRlZ3JlZXMoaGVhZGluZyArIDkwKSArIFwiZGVnKVwiO1xufVxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIERSQVdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBkcmF3KCkge1xuICB1cGRhdGUoKTtcbiAgYmFja2dyb3VuZCgwKTtcbiAgZmlsbChcImJsYWNrXCIpO1xuICBub1N0cm9rZSgpO1xuICBnVGVudGFjbGVzLmZvckVhY2godCA9PiB0LmRyYXcoKSk7XG59XG5cbmludGVyZmFjZSBUYXJnZXRXb3JkUG9zIHtcbiAgbGVmdDogbnVtYmVyO1xuICByaWdodDogbnVtYmVyO1xuICB0b3A6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuICBwb3M6IHA1LlZlY3Rvcjtcbn1cblxuZnVuY3Rpb24gZ2V0UG9zT2ZUYXJnZXRXb3JkKGVsOiBFbGVtZW50KTogVGFyZ2V0V29yZFBvcyB7XG4gIGNvbnN0IGIgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBiLmxlZnQsXG4gICAgcmlnaHQ6IGIucmlnaHQsXG4gICAgdG9wOiBiLnRvcCxcbiAgICBib3R0b206IGIuYm90dG9tLFxuICAgIHdpZHRoOiBiLndpZHRoLFxuICAgIGhlaWdodDogYi5oZWlnaHQsXG4gICAgcG9zOiBjcmVhdGVWZWN0b3IoYi5sZWZ0ICsgYi53aWR0aCAvIDIsIGIudG9wICsgYi5oZWlnaHQgLyAyKVxuICB9O1xufVxuXG5mdW5jdGlvbiBtb3ZlSGVsZFdvcmRUbyhoZWxkV29yZDogSGVsZERPTVdvcmQsIG5ld1BvczogcDUuVmVjdG9yKTogdm9pZCB7XG4gIGNvbnN0IGVsZW0gPSBoZWxkV29yZC5lbGVtO1xuICBjb25zdCBib3VuZHNJbmZvID0gaGVsZFdvcmQub3JpZ2luYWxQb3NBbmRCb3VuZHM7XG4gIGJvdW5kc0luZm8ud2lkdGg7XG4gIGVsZW0uc3R5bGUubGVmdCA9IG5ld1Bvcy54IC0gYm91bmRzSW5mby53aWR0aCAvIDIgKyBcInB4XCI7XG4gIGVsZW0uc3R5bGUudG9wID0gbmV3UG9zLnkgLSBib3VuZHNJbmZvLmhlaWdodCAvIDIgKyBcInB4XCI7XG59XG5mdW5jdGlvbiBmaW5kVGFyZ2V0V29yZHMoKTogSFRNTEVsZW1lbnRbXSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgXCJ3b3JkdG9lYXRcIlxuICApIGFzIEhUTUxDb2xsZWN0aW9uT2Y8SFRNTEVsZW1lbnQ+KTtcbn1cbmZ1bmN0aW9uIGNhdGNoVGFyZ2V0RWxlbShlbGVtOiBIVE1MRWxlbWVudCwgdGVudGFjbGU6IFRlbnRhY2xlKTogdm9pZCB7XG4gIGNvbnN0IHRhcmdldEVsZW06IEhUTUxFbGVtZW50ID0gZWxlbTtcbiAgY29uc3QgY2xvbmUgPSB0YXJnZXRFbGVtLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDsgLy9vbmx5IHRoaXMgaGFzIHN0eWxlXG4gIHRhcmdldEVsZW0uc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmQoY2xvbmUpO1xuICBjbG9uZS5jbGFzc0xpc3QuYWRkKFwiY2F1Z2h0XCIpOyAvL3RoaXMgaW5jbHVkZXMgYWJzb2x1dGUgcG9zaXRpb25pbmdcblxuICB0ZW50YWNsZS5oZWxkV29yZCA9IHtcbiAgICBlbGVtOiBjbG9uZSxcbiAgICBvcmlnaW5hbFBvc0FuZEJvdW5kczogZ2V0UG9zT2ZUYXJnZXRXb3JkKGNsb25lKVxuICB9O1xufVxuIiwiY2xhc3MgUGFsZXR0ZSB7XG4gIHN0YXRpYyBnZXRDb2xvcnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGNvbG9yKDI1MCwgMTA1LCAwKSxcbiAgICAgIGNvbG9yKDEwNSwgMjEwLCAyMzEpLFxuICAgICAgY29sb3IoMTY3LCAyMTksIDIxNiksXG4gICAgICBjb2xvcigyNDMsIDEzNCwgNDgpXG4gICAgXTtcbiAgfVxuICBzdGF0aWMgcmFuZG9tQ29sb3IoKTogcDUuQ29sb3Ige1xuICAgIHJldHVybiByYW5kb20oUGFsZXR0ZS5nZXRDb2xvcnMoKSk7XG4gIH1cbn1cbiIsImNsYXNzIFBhcnRpY2xlIHtcbiAgcG9zOiBwNS5WZWN0b3I7XG5cbiAgY29uc3RydWN0b3IocG9zOiBwNS5WZWN0b3IpIHtcbiAgICB0aGlzLnBvcyA9IHBvcy5jb3B5KCk7XG4gIH1cbiAgZHJhdygpIHtcbiAgICBub1N0cm9rZSgpO1xuICAgIGZpbGwoXCJibGFja1wiKTtcbiAgICByZWN0TW9kZShDRU5URVIpO1xuICAgIHNxdWFyZSh0aGlzLnBvcy54LCB0aGlzLnBvcy55LCAzKTtcbiAgICBmaWxsKDAsIDIwKTtcbiAgfVxuXG4gIHNldFBvc2l0aW9uKHBvczogcDUuVmVjdG9yKSB7XG4gICAgdGhpcy5wb3MueCA9IHBvcy54O1xuICAgIHRoaXMucG9zLnkgPSBwb3MueTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVSYW5kb20oKSB7XG4gICAgcmV0dXJuIG5ldyBQYXJ0aWNsZShyYW5kb21TY3JlZW5Qb3NpdGlvbigpKTtcbiAgfVxufVxuIiwiZnVuY3Rpb24gcmFuZG9tQ29sb3IoKTogcDUuQ29sb3Ige1xuICBjb2xvck1vZGUoSFNCLCAxMDApO1xuICByZXR1cm4gY29sb3IocmFuZG9tKDEwMCksIDEwMCwgMTAwKTtcbn1cbmNsYXNzIFNlZ21lbnQgaW1wbGVtZW50cyBUYXJnZXRQcm92aWRlciB7XG4gIGRlbHRhVG9UYXJnZXQ6IHA1LlZlY3RvcjtcbiAgYTogcDUuVmVjdG9yO1xuICBiOiBwNS5WZWN0b3I7XG4gIGlkOiBzdHJpbmc7XG4gIG15Q29sb3I6IHA1LkNvbG9yO1xuICBlZGdlQ29sb3I6IHA1LkNvbG9yO1xuICB0aGlja25lc3M6IG51bWJlcjtcbiAgbGVuOiBudW1iZXI7XG4gIGlzRml4ZWQ6IGJvb2xlYW47XG4gIHRhcmdldDogVGFyZ2V0UHJvdmlkZXI7XG4gIHRhcmdldENvbG9yOiBwNS5Db2xvcjtcbiAgbXlIdWU6IG51bWJlcjtcbiAgY29uc3RydWN0b3IoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhOiBwNS5WZWN0b3IsXG4gICAgYjogcDUuVmVjdG9yLFxuICAgIHRhcmdldDogVGFyZ2V0UHJvdmlkZXIsXG4gICAgdGhpY2tuZXNzU2NhbGU6IG51bWJlcixcbiAgICBtYXhUaGlja25lc3M6IG51bWJlcixcbiAgICBteUh1ZTogbnVtYmVyXG4gICkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmEgPSBhLmNvcHkoKTtcbiAgICB0aGlzLmIgPSBiLmNvcHkoKTtcbiAgICB0aGlzLmlzRml4ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmxlbiA9IGEuZGlzdChiKTtcbiAgICBjb2xvck1vZGUoSFNCLCAxMDApO1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMubXlIdWUgPSBteUh1ZTtcbiAgICBjb25zdCBzYXQgPSA1MDtcbiAgICBjb25zdCBicmlnaHQgPSA1MDtcbiAgICB0aGlzLm15Q29sb3IgPSBjb2xvcih0aGlzLm15SHVlLCBzYXQsIHJhbmRvbShicmlnaHQgLSAxMCwgYnJpZ2h0ICsgMTApKTtcbiAgICB0aGlzLmVkZ2VDb2xvciA9IGNvbG9yKHRoaXMubXlIdWUsIHNhdCwgYnJpZ2h0IC0gMjApO1xuICAgIHRoaXMudGhpY2tuZXNzID0gdGhpY2tuZXNzU2NhbGUgKiBtYXhUaGlja25lc3MgKiByYW5kb20oMC45LCAxLjEpO1xuICAgIHRoaXMudGFyZ2V0Q29sb3IgPSByYW5kb21Db2xvcigpO1xuICB9XG4gIHBvcygpOiBwNS5WZWN0b3Ige1xuICAgIHJldHVybiB0aGlzLmEuY29weSgpO1xuICB9XG4gIGdldEFuZ2xlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYlxuICAgICAgLmNvcHkoKVxuICAgICAgLnN1Yih0aGlzLmEpXG4gICAgICAuaGVhZGluZygpO1xuICB9XG4gIHRyYW5zbGF0ZShvZmZzZXQ6IHA1LlZlY3Rvcikge1xuICAgIHRoaXMuYS5hZGQob2Zmc2V0KTtcbiAgICB0aGlzLmIuYWRkKG9mZnNldCk7XG4gIH1cbiAgZHJhd1NoYWRvdygpIHtcbiAgICBjb25zdCBvZmYgPSBjcmVhdGVWZWN0b3IoMjAsIDEwKTtcbiAgICBzdHJva2UoY29sb3IodGhpcy5teUh1ZSwgMCwgMCwgMjApKTtcbiAgICBub0ZpbGwoKTtcbiAgICBzdHJva2VXZWlnaHQodGhpcy50aGlja25lc3MpO1xuICAgIGxpbmUoXG4gICAgICBvZmYueCArIHRoaXMuYS54LFxuICAgICAgb2ZmLnkgKyB0aGlzLmEueSxcbiAgICAgIG9mZi54ICsgdGhpcy5iLngsXG4gICAgICBvZmYueSArIHRoaXMuYi55XG4gICAgKTtcbiAgfVxuICBkcmF3U2lsaG91dHRlKCkge1xuICAgIG5vRmlsbCgpO1xuICAgIHN0cm9rZSgxMCk7XG4gICAgc3Ryb2tlV2VpZ2h0KHRoaXMudGhpY2tuZXNzKTtcbiAgICBsaW5lKHRoaXMuYS54LCB0aGlzLmEueSwgdGhpcy5iLngsIHRoaXMuYi55KTtcbiAgfVxuICBkcmF3SW5uZXIoKSB7XG4gICAgLy9zdHJva2VDYXAoU1FVQVJFKTtcbiAgICBzdHJva2UodGhpcy5teUNvbG9yKTtcbiAgICBzdHJva2VXZWlnaHQodGhpcy50aGlja25lc3MgKiAwLjgpO1xuICAgIGxpbmUodGhpcy5hLngsIHRoaXMuYS55LCB0aGlzLmIueCwgdGhpcy5iLnkpO1xuICB9XG4gIHN0YXRpYyBkcmF3Q3Jvc3NoYWlyQXQocG9zOiBwNS5WZWN0b3IsIGNvbHI6IHA1LkNvbG9yKSB7XG4gICAgc3Ryb2tlV2VpZ2h0KDEuOCk7XG4gICAgc3Ryb2tlKGNvbHIpO1xuICAgIHB1c2goKTtcbiAgICB0cmFuc2xhdGUocG9zLngsIHBvcy55KTtcbiAgICBsaW5lKC04LCAwLCA4LCAwKTtcbiAgICBsaW5lKDAsIC04LCAwLCA4KTtcbiAgICBwb3AoKTtcbiAgfVxuICBtaWRQb2ludCgpOiBwNS5WZWN0b3Ige1xuICAgIHJldHVybiB0aGlzLmEuY29weSgpLmxlcnAodGhpcy5iLCAwLjUpO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZVJhbmRvbUF0KFxuICAgIGlkOiBzdHJpbmcsXG4gICAgcG9zQTogcDUuVmVjdG9yLFxuICAgIHRhcmdldDogVGFyZ2V0UHJvdmlkZXIsXG4gICAgdGhpY2tuZXNzU2NhbGU6IG51bWJlcixcbiAgICBtYXhUaGlja25lc3M6IG51bWJlcixcbiAgICBsZW46IG51bWJlcixcbiAgICBteUh1ZTogbnVtYmVyXG4gICkge1xuICAgIGNvbnN0IHAxID0gcG9zQS5jb3B5KCk7XG4gICAgY29uc3QgcDIgPSBwMS5jb3B5KCkuYWRkKHA1LlZlY3Rvci5yYW5kb20yRCgpLm11bHQobGVuKSk7XG4gICAgcmV0dXJuIG5ldyBTZWdtZW50KGlkLCBwMSwgcDIsIHRhcmdldCwgdGhpY2tuZXNzU2NhbGUsIG1heFRoaWNrbmVzcywgbXlIdWUpO1xuICB9XG4gIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNlZWtUYXJnZXQodGhpcy50YXJnZXQucG9zKCkpO1xuICB9XG5cbiAgc2Vla1RhcmdldCh0YXJnZXRQb3M6IHA1LlZlY3Rvcik6IHZvaWQge1xuICAgIGNvbnN0IGRlbHRhVG9UYXJnZXQgPSB0YXJnZXRQb3MuY29weSgpLnN1Yih0aGlzLmEpO1xuICAgIHRoaXMuZGVsdGFUb1RhcmdldCA9IGRlbHRhVG9UYXJnZXQ7XG4gICAgdGhpcy5hID0gdGFyZ2V0UG9zLmNvcHkoKS5hZGQoXG4gICAgICBkZWx0YVRvVGFyZ2V0XG4gICAgICAgIC5jb3B5KClcbiAgICAgICAgLm5vcm1hbGl6ZSgpXG4gICAgICAgIC5tdWx0KC10aGlzLmxlbilcbiAgICApO1xuICAgIHRoaXMuYiA9IHRhcmdldFBvcy5jb3B5KCk7XG4gIH1cbn1cbiIsImludGVyZmFjZSBUYXJnZXRQcm92aWRlciB7XG4gIHBvcygpOiBwNS5WZWN0b3I7XG59XG5cbmludGVyZmFjZSBIZWxkRE9NV29yZCB7XG4gIGVsZW06IEhUTUxFbGVtZW50O1xuICBvcmlnaW5hbFBvc0FuZEJvdW5kczogVGFyZ2V0V29yZFBvcztcbn1cbmNsYXNzIFRlbnRhY2xlIHtcbiAgc2VnbWVudHM6IFNlZ21lbnRbXTtcbiAgcHJvdmlkZVRhcmdldDogVGFyZ2V0UHJvdmlkZXI7XG5cbiAgaGVsZFdvcmQ/OiBIZWxkRE9NV29yZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBudW1TZWdtZW50czogbnVtYmVyLFxuICAgIGZ1bGxMZW5ndGg6IG51bWJlcixcbiAgICBtYXhUaGlja25lc3M6IG51bWJlcixcbiAgICBiYXNlSHVlT2YxMDA6IG51bWJlcixcbiAgICBwcm92aWRlVGFyZ2V0OiBUYXJnZXRQcm92aWRlclxuICApIHtcbiAgICBjb25zdCBteUh1ZSA9IHJhbmRvbShiYXNlSHVlT2YxMDAgLSA1LCBiYXNlSHVlT2YxMDAgKyA1KTtcbiAgICBjb25zdCBhdmdTZWdtZW50TGVuZ3RoID0gZnVsbExlbmd0aCAvIG51bVNlZ21lbnRzO1xuICAgIHRoaXMucHJvdmlkZVRhcmdldCA9IHByb3ZpZGVUYXJnZXQ7XG5cbiAgICBsZXQgcHJldlBvczogcDUuVmVjdG9yID0gY3JlYXRlVmVjdG9yKFxuICAgICAgcmFuZG9tKHdpZHRoICogMC40LCB3aWR0aCAqIDAuNiksXG4gICAgICBoZWlnaHQgKiAxLjFcbiAgICApO1xuICAgIHRoaXMuc2VnbWVudHMgPSBjb2xsZWN0RGlzdHJpYnV0ZWRCZXR3ZWVuKFxuICAgICAgbnVtU2VnbWVudHMsXG4gICAgICAwLFxuICAgICAgMC45LFxuICAgICAgKHRoaWNrbmVzcywgaXgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VnbWVudCA9IFNlZ21lbnQuY3JlYXRlUmFuZG9tQXQoXG4gICAgICAgICAgXCJTZWdcIiArIGl4LFxuICAgICAgICAgIHByZXZQb3MsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICAxIC0gdGhpY2tuZXNzLFxuICAgICAgICAgIG1heFRoaWNrbmVzcyxcbiAgICAgICAgICBhdmdTZWdtZW50TGVuZ3RoLFxuICAgICAgICAgIG15SHVlXG4gICAgICAgICk7XG4gICAgICAgIHByZXZQb3MgPSBzZWdtZW50LmIuY29weSgpO1xuICAgICAgICByZXR1cm4gc2VnbWVudDtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuc2VnbWVudHNbMF0uaXNGaXhlZCA9IHRydWU7XG5cbiAgICBsZXQgdGhpbm5lclNlZ21lbnQ6IFNlZ21lbnQgPSBudWxsO1xuICAgIHRoaXMuc2VnbWVudHMucmV2ZXJzZSgpLmZvckVhY2goc2VnID0+IHtcbiAgICAgIHNlZy50YXJnZXQgPSB0aGlubmVyU2VnbWVudCA/IHRoaW5uZXJTZWdtZW50IDogdGhpcy5wcm92aWRlVGFyZ2V0O1xuICAgICAgdGhpbm5lclNlZ21lbnQgPSBzZWc7XG4gICAgfSk7XG4gICAgdGhpcy5zZWdtZW50cy5yZXZlcnNlKCk7XG4gIH1cbiAgbGFzdFNlZ21lbnQoKTogU2VnbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuc2VnbWVudHMubGVuZ3RoID4gMFxuICAgICAgPyB0aGlzLnNlZ21lbnRzW3RoaXMuc2VnbWVudHMubGVuZ3RoIC0gMV1cbiAgICAgIDogdW5kZWZpbmVkO1xuICB9XG4gIGZpcnN0U2VnbWVudCgpOiBTZWdtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5sZW5ndGggPiAwID8gdGhpcy5zZWdtZW50c1swXSA6IHVuZGVmaW5lZDtcbiAgfVxuICBzZXROZXdUYXJnZXRQcm92aWRlcihnaXZlblRhcmdldFByb3ZpZGVyOiBUYXJnZXRQcm92aWRlcik6IHZvaWQge1xuICAgIHRoaXMucHJvdmlkZVRhcmdldCA9IGdpdmVuVGFyZ2V0UHJvdmlkZXI7XG4gICAgdGhpcy5sYXN0U2VnbWVudCgpLnRhcmdldCA9IGdpdmVuVGFyZ2V0UHJvdmlkZXI7XG4gIH1cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IG9yaWdpbmFsTG9ja2VkUG9zID0gdGhpcy5zZWdtZW50c1swXS5hLmNvcHkoKTtcbiAgICB0aGlzLnNlZ21lbnRzLnJldmVyc2UoKTtcbiAgICBmb3IgKGxldCBzIG9mIHRoaXMuc2VnbWVudHMpIHtcbiAgICAgIHMudXBkYXRlKCk7XG4gICAgfVxuICAgIHRoaXMuc2VnbWVudHMucmV2ZXJzZSgpO1xuICAgIGNvbnN0IG1vdmVCYWNrRGVsdGEgPSBvcmlnaW5hbExvY2tlZFBvc1xuICAgICAgLmNvcHkoKVxuICAgICAgLnN1Yih0aGlzLnNlZ21lbnRzWzBdLmEuY29weSgpKTtcbiAgICB0aGlzLnNlZ21lbnRzLmZvckVhY2gocyA9PiBzLnRyYW5zbGF0ZShtb3ZlQmFja0RlbHRhKSk7XG4gIH1cblxuICBkcmF3KCkge1xuICAgIGlmIChhcHBPcHRpb25zLnNob3VsZERyYXdTaGFkb3dzKSB7XG4gICAgICBmb3IgKGxldCBzIG9mIHRoaXMuc2VnbWVudHMpIHtcbiAgICAgICAgcy5kcmF3U2hhZG93KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgcyBvZiB0aGlzLnNlZ21lbnRzKSB7XG4gICAgICBzLmRyYXdTaWxob3V0dGUoKTtcbiAgICB9XG4gICAgZm9yIChsZXQgcyBvZiB0aGlzLnNlZ21lbnRzKSB7XG4gICAgICBzLmRyYXdJbm5lcigpO1xuICAgIH1cbiAgfVxufVxuIiwiZnVuY3Rpb24gcmFuZG9tU2NyZWVuUG9zaXRpb24oKTogcDUuVmVjdG9yIHtcbiAgcmV0dXJuIGNyZWF0ZVZlY3RvcihyYW5kb20od2lkdGgpLCByYW5kb20oaGVpZ2h0KSk7XG59XG5cbmZ1bmN0aW9uIGNlbnRlclNjcmVlblBvcygpOiBwNS5WZWN0b3Ige1xuICByZXR1cm4gY3JlYXRlVmVjdG9yKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbUludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gcm91bmQocmFuZG9tKG1pbiwgbWF4KSk7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZVRvVmVjKHBvczogcDUuVmVjdG9yKTogdm9pZCB7XG4gIHRyYW5zbGF0ZShwb3MueCwgcG9zLnkpO1xufVxuZnVuY3Rpb24gcm90YXRlVmVydGV4QXJvdW5kKFxuICB2ZXJ0ZXg6IHA1LlZlY3RvcixcbiAgcm90T3JpZ2luOiBwNS5WZWN0b3IsXG4gIGFuZ2xlUmFkOiBudW1iZXJcbik6IHA1LlZlY3RvciB7XG4gIHJldHVybiB2ZXJ0ZXhcbiAgICAuY29weSgpXG4gICAgLnN1Yihyb3RPcmlnaW4pXG4gICAgLnJvdGF0ZShhbmdsZVJhZClcbiAgICAuYWRkKHJvdE9yaWdpbik7XG59XG5cbi8qKiBGaW5kIHRoZSBtaW5pbXVtIG9mIHRoZSBnaXZlbiBsaXN0IGFmdGVyIGFwcGx5aW5nIGZuKCkgdG8gZWFjaC5cbiAqIFJldHVybiB0aGUgbWluaW11bSwgZmlyc3QgbWluaW11bSwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBubyBpdGVtcy5cbiAqL1xuZnVuY3Rpb24gbWluQnk8VD4obGlzdDogVFtdLCBmbjogKGl0ZW06IFQpID0+IG51bWJlcik6IFQge1xuICBpZiAobGlzdC5sZW5ndGggPCAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBsZXQgcmVjb3JkSXRlbSA9IGxpc3RbMF07XG4gIGxldCByZWNvcmRXZWlnaHQgPSBmbihsaXN0WzBdKTtcbiAgZm9yIChsZXQgaXRlbSBvZiBsaXN0KSB7XG4gICAgY29uc3Qgd2VpZ2h0ID0gZm4oaXRlbSk7XG4gICAgaWYgKHdlaWdodCA+IHJlY29yZFdlaWdodCkge1xuICAgICAgcmVjb3JkV2VpZ2h0ID0gd2VpZ2h0O1xuICAgICAgcmVjb3JkSXRlbSA9IGl0ZW07XG4gICAgfVxuICB9XG4gIHJldHVybiByZWNvcmRJdGVtO1xufVxuXG4vKiogUmVwZWF0ZWRseSBjYWxsIHRoZSBnaXZlbiBmdW5jdGlvbiBmbiwgbnVtIHRpbWVzLCB0aHJvd2luZyBhbnkgb3V0cHV0IGF3YXkuICovXG5mdW5jdGlvbiByZXBlYXQobnVtOiBudW1iZXIsIGZuOiAoaXg6IG51bWJlcikgPT4gdm9pZCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bTsgaSsrKSB7XG4gICAgZm4oaSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlzdHJpYnV0ZVVwVG8odG90YWw6IG51bWJlciwgbWF4OiBudW1iZXIsIGZuOiAodjogbnVtYmVyKSA9PiB2b2lkKSB7XG4gIHJlcGVhdCh0b3RhbCwgaXggPT4ge1xuICAgIGNvbnN0IHZhbCA9IChpeCAqIG1heCkgLyB0b3RhbDtcbiAgICByZXR1cm4gZm4odmFsKTtcbiAgfSk7XG59XG4vKiogXG5Db2xsZWN0IGEgc2V0IG9mIHZhbHVlcyBnZW5lcmF0ZWQgd2l0aCBmbiBjYWxsZWQgd2l0aCBcbmEgcmFuZ2Ugb2YgbnVtU2FtcGxlcyBzYW1wbGVzIGRpc3RyaWJ1dGVkIGV2ZW5seSBmcm9tIG1pbiB0byBtYXguXG4qL1xuZnVuY3Rpb24gY29sbGVjdERpc3RyaWJ1dGVkQmV0d2VlbjxUPihcbiAgbnVtU2FtcGxlczogbnVtYmVyLFxuICBtaW46IG51bWJlcixcbiAgbWF4OiBudW1iZXIsXG4gIGZuOiAodjogbnVtYmVyLCBpeD86IG51bWJlcikgPT4gVFxuKTogVFtdIHtcbiAgY29uc3QgcmVzdWx0OiBUW10gPSBbXTtcbiAgZGlzdHJpYnV0ZUJldHdlZW4obnVtU2FtcGxlcywgbWluLCBtYXgsICh2LCBpeCkgPT4gcmVzdWx0LnB1c2goZm4odiwgaXgpKSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBkaXN0cmlidXRlQmV0d2VlbihcbiAgbnVtU2FtcGxlczogbnVtYmVyLFxuICBtaW46IG51bWJlcixcbiAgbWF4OiBudW1iZXIsXG4gIGZuOiAodjogbnVtYmVyLCBpeD86IG51bWJlcikgPT4gdm9pZFxuKSB7XG4gIHJlcGVhdChudW1TYW1wbGVzLCBpeCA9PiB7XG4gICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW47XG4gICAgY29uc3QgdmFsID0gbWluICsgKGl4ICogcmFuZ2UpIC8gbnVtU2FtcGxlcztcbiAgICByZXR1cm4gZm4odmFsLCBpeCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gYXZlcmFnZVZlY3RvcnModnM6IHA1LlZlY3RvcltdKTogcDUuVmVjdG9yIHtcbiAgaWYgKHZzLmxlbmd0aCA8IDEpIHtcbiAgICByZXR1cm4gY3JlYXRlVmVjdG9yKDAsIDApO1xuICB9XG4gIHJldHVybiB2cy5yZWR1Y2UoKHYxLCB2MikgPT4gdjEuY29weSgpLmFkZCh2MiksIHZzWzBdKS5kaXYodnMubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gcmFuZG9tQm9vbGVhbigpOiBib29sZWFuIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkgPiAwLjU7XG59XG5mdW5jdGlvbiBtb3VzZVBvc0FzVmVjdG9yKCk6IHA1LlZlY3RvciB7XG4gIHJldHVybiBjcmVhdGVWZWN0b3IobW91c2VYLCBtb3VzZVkpO1xufVxuZnVuY3Rpb24gY29sbGVjdDxUPihuOiBudW1iZXIsIGZuOiAoaXg6IG51bWJlcikgPT4gVCk6IFRbXSB7XG4gIGNvbnN0IHJlcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIHJlcy5wdXNoKGZuKGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuIl19